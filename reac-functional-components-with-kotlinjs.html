<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1" /> <title>React Functional Components with Kotlin/JS · Dev Blog by Brian</title> <meta name="description" content="I’ve been playing with Kotlin/JS and React lately. I’ve been wanting to learn more about frontenddevelopment, and since I’m very familiar with Kotlin, though..."> <link rel="icon" href="https://blog.bnorm.dev/assets/favicon.png"> <link rel="apple-touch-icon" href="https://blog.bnorm.dev/assets/touch-icon.png"> <link rel="stylesheet" href="https://blog.bnorm.dev/assets/core.css"> <link rel="canonical" href="https://blog.bnorm.dev/reac-functional-components-with-kotlinjs"> <link rel="alternate" type="application/atom+xml" title="Dev Blog by Brian" href="https://blog.bnorm.dev/feed.xml" /> <!-- OpenGraph metadatas --> <meta name="og:type" content="article"> <meta name="og:site_name" content="Dev Blog by Brian"> <meta name="og:title" content="React Functional Components with Kotlin/JS"> <meta name="og:url" content="https://blog.bnorm.dev/reac-functional-components-with-kotlinjs"> <meta name="og:description" content="React Functional Components with Kotlin/JS"> <!-- Twitter cards metadatas --> <meta name="twitter:card" content="summary"> <meta name="twitter:site" content="@bnormcodes"> <meta name="twitter:creator" content="@bnormcodes"> <meta name="twitter:title" content="React Functional Components with Kotlin/JS"> <meta name="twitter:url" content="https://blog.bnorm.dev/reac-functional-components-with-kotlinjs"> <meta name="twitter:description" content="React Functional Components with Kotlin/JS"> <!-- Google Analytics --> <script async src="https://www.googletagmanager.com/gtag/js?id=G-SH69BHV31K"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-SH69BHV31K'); </script> </head> <body> <div class="header"> <aside class="logo"> <a href="https://blog.bnorm.dev/"> <img src="https://avatars2.githubusercontent.com/u/1074449?v=4" alt="" class="logo-avatar"> </a> <span class="logo-prompt code">Back to Index</span> </aside> <div class="social-media-list"> <div> <a href="https://github.com/bnorm"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> bnorm</a> </div> <div> <a href="https://www.twitter.com/bnormcodes"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> bnormcodes</a> </div> </div> </div> <div id="content"> <article> <div class="center"> <h1 class="title">React Functional Components with Kotlin/JS</h1> <time class="code">September 25, 2020</time> </div> <div class="divider"></div> <p>I’ve been playing with Kotlin/JS and React lately. I’ve been wanting to learn more about frontend development, and since I’m very familiar with Kotlin, thought Kotlin/JS and React would be a good entry point.</p> <h1 id="react">React</h1> <p>I’m not even going to pretend to be able to explain React. You should go read the [official documentation] if you want to learn more. A quick primer: React enables the creation of <strong>Components</strong> which are reusable and composable and built from other components and standard HTML tags using a XML-like syntax called JSX. Components can be stateful and take properties as inputs. Here’s an example component right from the home page of React:</p><pre><code class="language-JavaScript">class HelloMessage extends React.Component {
  render() {
    return (
      &lt;div&gt;
        Hello, {this.props.name}
      &lt;/div&gt;
    );
  }
}
</code></pre><h1 id="react-functional-components">React Functional Components</h1> <p>More modern React uses <a href="https://reactjs.org/docs/components-and-props.html#function-and-class-components"><strong><code class="language-plaintext highlighter-rouge">Functional Components</code></strong></a>. These are just standard JavaScript functions which accept a <code class="language-plaintext highlighter-rouge">props</code> parameter and return a React element. Here is the functional version of the previous component example.</p><pre><code class="language-JavaScript">function Welcome(props) {
  return &lt;div&gt;Hello, {props.name}&lt;/div&gt;;
}
</code></pre><h1 id="kotlinjs-and-react">Kotlin/JS and React</h1> <p>Using the <a href="https://github.com/JetBrains/kotlin-wrappers">wrappers for React</a> provided by JetBrains, you can define React components in Kotlin/JS. Because Kotlin is a type safe language, there is a bit more boiler plate required to reproduce the original example.</p> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">external</span> <span class="kd">interface</span> <span class="nc">WelcomeProps</span> <span class="p">:</span> <span class="nc">RProps</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="py">name</span><span class="p">:</span> <span class="nc">String</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nc">Welcome</span><span class="p">:</span> <span class="nc">RComponent</span><span class="p">&lt;</span><span class="nc">WelcomeProps</span><span class="p">,</span> <span class="nc">RState</span><span class="p">&gt;()</span> <span class="p">{</span>
     <span class="k">override</span> <span class="k">fun</span> <span class="nc">RBuilder</span><span class="p">.</span><span class="nf">render</span><span class="p">()</span> <span class="p">{</span>
        <span class="nf">div</span> <span class="p">{</span>
            <span class="p">+</span><span class="s">"Hello, ${props.name}"</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">fun</span> <span class="nc">RBuilder</span><span class="p">.</span><span class="nf">welcome</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nc">String</span><span class="p">)</span> <span class="p">=</span> <span class="nf">child</span><span class="p">(</span><span class="nc">Welcome</span><span class="o">::</span><span class="k">class</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">attrs</span><span class="p">.</span><span class="n">name</span> <span class="p">=</span> <span class="n">name</span>
<span class="p">}</span>
</code></pre></div></div> <h1 id="kotlinjs-and-react-functional-components">Kotlin/JS and React Functional Components</h1> <p>Also provided by the Kotlin wrappers for React is a functional component builder. Again, because of type safety, there is some builder plate and it is both similar and different from the class version of the component.</p> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">external</span> <span class="kd">interface</span> <span class="nc">WelcomeProps</span> <span class="p">:</span> <span class="nc">RProps</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="py">name</span><span class="p">:</span> <span class="nc">String</span>
<span class="p">}</span>

<span class="kd">val</span> <span class="py">WELCOME</span> <span class="p">=</span> <span class="n">rFunction</span><span class="p">&lt;</span><span class="nc">WelcomeProps</span><span class="p">&gt;(</span><span class="s">"Welcome"</span><span class="p">)</span> <span class="p">{</span> <span class="n">props</span> <span class="p">-&gt;</span> 
    <span class="nf">div</span> <span class="p">{</span>
        <span class="p">+</span><span class="s">"Hello, ${props.name}"</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">fun</span> <span class="nc">RBuilder</span><span class="p">.</span><span class="nf">Welcome</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nc">String</span><span class="p">)</span> <span class="p">=</span> <span class="nc">WELCOME</span><span class="p">.</span><span class="nf">invoke</span> <span class="p">{</span>
    <span class="n">attrs</span><span class="p">.</span><span class="n">name</span> <span class="p">=</span> <span class="n">name</span>
<span class="p">}</span>
</code></pre></div></div> <h1 id="kotlinjs-react-compiler-plugin">Kotlin/JS React Compiler Plugin</h1> <p>I’ve got some background with <a href="https://medium.com/@bnorm/exploring-kotlin-ir-bed8df167c23">Kotlin compiler plugins</a>, so I looked at the boiler plate required to build functional components in Kotlin/JS and knew it could be better. The most optimal reduction of boiler plate might look something like the following.</p> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">fun</span> <span class="nc">RBuilder</span><span class="p">.</span><span class="nf">Welcome</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nc">String</span><span class="p">)</span> <span class="p">{</span>
    <span class="nf">div</span> <span class="p">{</span>
        <span class="p">+</span><span class="s">"Hello, $name"</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <p>How do we get this function to be a valid Kotlin/JS React functional component? Some things to notice:</p> <ol> <li> <p>The parameters to the function are exactly the properties of the <code class="language-plaintext highlighter-rouge">WelcomeProps</code> interface.</p> </li> <li> <p>The body of the function is exactly the lambda used for the call to <code class="language-plaintext highlighter-rouge">rFunction</code>.</p> </li> </ol> <h1 id="kotlin-react-function-compiler-plugin">Kotlin React Function Compiler Plugin</h1> <p>With the new Kotlin/JS compiler plugin <a href="https://github.com/bnorm/kotlin-react-function">kotlin-react-function</a> for React functional components, the above function can be converted using a single annotation <code class="language-plaintext highlighter-rouge">@RFunction</code>.</p> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@RFunction</span>
<span class="k">fun</span> <span class="nc">RBuilder</span><span class="p">.</span><span class="nf">Welcome</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nc">String</span><span class="p">)</span> <span class="p">{</span>
    <span class="nf">div</span> <span class="p">{</span>
        <span class="p">+</span><span class="s">"Hello, $name"</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <p>When the annotation is added to the function along with the <code class="language-plaintext highlighter-rouge">kotlin-react-function</code> Gradle plugin, the boiler plate required is automatically generated and the function is transformed to use the boiler plate.</p> <p>Looking back at the JavaScript version of this functional component, this is very similar and reduces the boilerplate required significantly.</p> <hr /> <p>My Kotlin/JS and React journey is just beginning, but hopefully this compiler plugin will make creating React functional components in Kotlin/JS much easier for me and everyone else!</p> </article> <div class="page-navigation code"> <a class="next" href="https://blog.bnorm.dev/soft-assertion-with-kotlin-power-assert" title="NEXT: Soft Assertion with kotlin-power-assert">&lt;&lt;</a> <span> &middot; </span> <a class="home" href="https://blog.bnorm.dev/" title="Back to Index">Index</a> <span> &middot; </span> <a class="prev" href="https://blog.bnorm.dev/kotlin-optin-annotation-as-a-scoping-tool" title="PREV: Kotlin OptIn Annotation as a Scoping Tool">&gt;&gt;</a> </div> </div> <div class="footer"> <span class="block">&copy; 2022 Brian Norman</span> <span class="block"><small>&lt;/&gt; Powered by <a href="https://jekyllrb.com/">Jekyll</a> and <a href="https://github.com/heiswayi/the-plain">The Plain theme</a>.</small></span> </div> </body> </html>
